{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Sergipetec/Documents/supabase-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SupabaseService } from './supabase.service';\nimport * as i0 from \"@angular/core\";\nexport class AccountComponent {\n  constructor() {\n    this.loading = false;\n    this.supabase = inject(SupabaseService);\n  }\n\n  ngOnInit() {\n    this.getProfile();\n  }\n\n  getProfile() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this.loading = true;\n        const {\n          data: profile,\n          error,\n          status\n        } = yield _this.supabase.profile;\n\n        if (error && status !== 406) {\n          throw error;\n        }\n\n        if (profile) {\n          _this.profile = profile;\n        }\n      } catch (error) {\n        alert(error.error_description || error.message);\n      } finally {\n        _this.loading = false;\n      }\n    })();\n  }\n\n  updateProfile(username, website, avatar_url) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this2.loading = true;\n        const profile = {\n          username,\n          website,\n          avatar_url\n        };\n        yield _this2.supabase.updateProfile(profile);\n        yield _this2.getProfile();\n        alert('Profile updated!');\n      } catch (error) {\n        alert(error.error_description || error.message);\n      } finally {\n        _this2.loading = false;\n      }\n    })();\n  }\n\n  signOut() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.supabase.signOut();\n    })();\n  }\n\n}\n\nAccountComponent.ɵfac = function AccountComponent_Factory(t) {\n  return new (t || AccountComponent)();\n};\n\nAccountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AccountComponent,\n  selectors: [[\"app-account\"]],\n  inputs: {\n    session: \"session\"\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 26,\n  vars: 6,\n  consts: [[1, \"form-widget\"], [\"for\", \"email\"], [\"id\", \"email\", \"type\", \"text\", \"disabled\", \"\", 3, \"value\"], [\"for\", \"username\"], [\"id\", \"username\", \"type\", \"text\", 3, \"value\"], [\"username\", \"\"], [\"for\", \"website\"], [\"id\", \"website\", \"type\", \"url\", 3, \"value\"], [\"website\", \"\"], [\"for\", \"avatar_url\"], [\"id\", \"avatar_url\", \"type\", \"url\", 3, \"value\"], [\"avatar_url\", \"\"], [1, \"button\", \"primary\", \"block\", 3, \"disabled\", \"click\"], [1, \"button\", \"block\", 3, \"click\"]],\n  template: function AccountComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\")(2, \"label\", 1);\n      i0.ɵɵtext(3, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"input\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\")(6, \"label\", 3);\n      i0.ɵɵtext(7, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 4, 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\")(11, \"label\", 6);\n      i0.ɵɵtext(12, \"Website\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 7, 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\")(16, \"label\", 9);\n      i0.ɵɵtext(17, \"Avatar URL\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 10, 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\")(21, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function AccountComponent_Template_button_click_21_listener() {\n        i0.ɵɵrestoreView(_r3);\n\n        const _r0 = i0.ɵɵreference(9);\n\n        const _r1 = i0.ɵɵreference(14);\n\n        const _r2 = i0.ɵɵreference(19);\n\n        return i0.ɵɵresetView(ctx.updateProfile(_r0.value, _r1.value, _r2.value));\n      });\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\")(24, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function AccountComponent_Template_button_click_24_listener() {\n        return ctx.signOut();\n      });\n      i0.ɵɵtext(25, \"Sign Out\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.session == null ? null : ctx.session.user == null ? null : ctx.session.user.email);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", (tmp_1_0 = ctx.profile == null ? null : ctx.profile.username) !== null && tmp_1_0 !== undefined ? tmp_1_0 : \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", (tmp_2_0 = ctx.profile == null ? null : ctx.profile.website) !== null && tmp_2_0 !== undefined ? tmp_2_0 : \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", (tmp_3_0 = ctx.profile == null ? null : ctx.profile.avatar_url) !== null && tmp_3_0 !== undefined ? tmp_3_0 : \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Loading ...\" : \"Update\", \" \");\n    }\n  },\n  dependencies: [CommonModule],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhY2NvdW50LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":";AAAA,SAAoBA,MAApB,QAAiD,eAAjD;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,eAAT,QAAyC,oBAAzC;;AAUA,OAAM,MAAOC,gBAAP,CAAuB;EAP7BC;IAQE,eAAU,KAAV;IAKiB,gBAAWJ,MAAM,CAACE,eAAD,CAAjB;EA0ClB;;EAxCCG,QAAQ;IACN,KAAKC,UAAL;EACD;;EAEKA,UAAU;IAAA;;IAAA;MACd,IAAI;QACF,KAAI,CAACC,OAAL,GAAe,IAAf;QACA,MAAM;UAAEC,IAAI,EAAEC,OAAR;UAAiBC,KAAjB;UAAwBC;QAAxB,UAAyC,KAAI,CAACC,QAAL,CAAcH,OAA7D;;QAEA,IAAIC,KAAK,IAAIC,MAAM,KAAK,GAAxB,EAA6B;UAC3B,MAAMD,KAAN;QACD;;QAED,IAAID,OAAJ,EAAa;UACX,KAAI,CAACA,OAAL,GAAeA,OAAf;QACD;MACF,CAXD,CAWE,OAAOC,KAAP,EAAmB;QACnBG,KAAK,CAACH,KAAK,CAACI,iBAAN,IAA2BJ,KAAK,CAACK,OAAlC,CAAL;MACD,CAbD,SAaU;QACR,KAAI,CAACR,OAAL,GAAe,KAAf;MACD;IAhBa;EAiBf;;EAEKS,aAAa,CAACC,QAAD,EAAmBC,OAAnB,EAAoCC,UAApC,EAAsD;IAAA;;IAAA;MACvE,IAAI;QACF,MAAI,CAACZ,OAAL,GAAe,IAAf;QACA,MAAME,OAAO,GAAG;UAAEQ,QAAF;UAAYC,OAAZ;UAAqBC;QAArB,CAAhB;QACA,MAAM,MAAI,CAACP,QAAL,CAAcI,aAAd,CAA4BP,OAA5B,CAAN;QACA,MAAM,MAAI,CAACH,UAAL,EAAN;QACAO,KAAK,CAAC,kBAAD,CAAL;MACD,CAND,CAME,OAAOH,KAAP,EAAmB;QACnBG,KAAK,CAACH,KAAK,CAACI,iBAAN,IAA2BJ,KAAK,CAACK,OAAlC,CAAL;MACD,CARD,SAQU;QACR,MAAI,CAACR,OAAL,GAAe,KAAf;MACD;IAXsE;EAYxE;;EAEKa,OAAO;IAAA;;IAAA;MACX,MAAI,CAACR,QAAL,CAAcQ,OAAd;IADW;EAEZ;;AA/C0B;;;mBAAhBjB;AAAgB;;;QAAhBA;EAAgBkB;EAAAC;IAAAC;EAAA;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;;MCZ7BC,+BAAyB,CAAzB,EAAyB,KAAzB,EAAyB,CAAzB,EAAyB,OAAzB,EAAyB,CAAzB;MAEuBA;MAAKA;MACxBA;MACFA;MACAA,4BAAK,CAAL,EAAK,OAAL,EAAK,CAAL;MACwBA;MAAIA;MAC1BA;MAMFA;MACAA,6BAAK,EAAL,EAAK,OAAL,EAAK,CAAL;MACuBA;MAAOA;MAC5BA;MACFA;MAEAA,6BAAK,EAAL,EAAK,OAAL,EAAK,CAAL;MAC0BA;MAAUA;MAClCA;MAMFA;MAEAA,6BAAK,EAAL,EAAK,QAAL,EAAK,EAAL;MAGIA;QAAAA;;QAAA;;QAAA;;QAAA;;QAAA,OAASA,kEAAT;MAAuE,CAAvE;MAGAA;MACFA;MAGFA,6BAAK,EAAL,EAAK,QAAL,EAAK,EAAL;MAC+BA;QAAA,OAASC,aAAT;MAAkB,CAAlB;MAAoBD;MAAQA;;;;;;;MArC3BA;MAAAA;MAQ5BA;MAAAA;MAKsCA;MAAAA;MAStCA;MAAAA;MAQAA;MAAAA;MAEAA;MAAAA;;;iBD3BM7B;EAAY+B","names":["inject","CommonModule","SupabaseService","AccountComponent","constructor","ngOnInit","getProfile","loading","data","profile","error","status","supabase","alert","error_description","message","updateProfile","username","website","avatar_url","signOut","selectors","inputs","session","standalone","features","decls","vars","consts","template","i0","ctx","styles"],"sourceRoot":"","sources":["C:\\Users\\Sergipetec\\Documents\\supabase-angular\\src\\app\\account.component.ts","C:\\Users\\Sergipetec\\Documents\\supabase-angular\\src\\app\\account.component.html"],"sourcesContent":["import { Component, inject, Input, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SupabaseService, Profile } from './supabase.service';\nimport { Session } from '@supabase/supabase-js';\n\n@Component({\n  selector: 'app-account',\n  standalone: true,\n  imports: [CommonModule],\n  templateUrl: './account.component.html',\n  styleUrls: ['./account.component.css'],\n})\nexport class AccountComponent implements OnInit {\n  loading = false;\n  profile: Profile | undefined;\n\n  @Input() session: Session | undefined;\n\n  private readonly supabase = inject(SupabaseService);\n\n  ngOnInit() {\n    this.getProfile();\n  }\n\n  async getProfile() {\n    try {\n      this.loading = true;\n      const { data: profile, error, status } = await this.supabase.profile;\n\n      if (error && status !== 406) {\n        throw error;\n      }\n\n      if (profile) {\n        this.profile = profile;\n      }\n    } catch (error: any) {\n      alert(error.error_description || error.message);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  async updateProfile(username: string, website: string, avatar_url: string) {\n    try {\n      this.loading = true;\n      const profile = { username, website, avatar_url };\n      await this.supabase.updateProfile(profile);\n      await this.getProfile();\n      alert('Profile updated!');\n    } catch (error: any) {\n      alert(error.error_description || error.message);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  async signOut() {\n    this.supabase.signOut();\n  }\n}\n","<div class=\"form-widget\">\n  <div>\n    <label for=\"email\">Email</label>\n    <input id=\"email\" type=\"text\" [value]=\"session?.user?.email\" disabled />\n  </div>\n  <div>\n    <label for=\"username\">Name</label>\n    <input\n      #username\n      id=\"username\"\n      type=\"text\"\n      [value]=\"profile?.username ?? ''\"\n    />\n  </div>\n  <div>\n    <label for=\"website\">Website</label>\n    <input #website id=\"website\" type=\"url\" [value]=\"profile?.website ?? ''\" />\n  </div>\n\n  <div>\n    <label for=\"avatar_url\">Avatar URL</label>\n    <input\n      #avatar_url\n      id=\"avatar_url\"\n      type=\"url\"\n      [value]=\"profile?.avatar_url ?? ''\"\n    />\n  </div>\n\n  <div>\n    <button\n      class=\"button primary block\"\n      (click)=\"updateProfile(username.value, website.value, avatar_url.value)\"\n      [disabled]=\"loading\"\n    >\n      {{ loading ? \"Loading ...\" : \"Update\" }}\n    </button>\n  </div>\n\n  <div>\n    <button class=\"button block\" (click)=\"signOut()\">Sign Out</button>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}